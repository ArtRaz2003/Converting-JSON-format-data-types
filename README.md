# Преобразование типов данных формата JSON
## Введение 

В процессе разработки любого программного обеспечения одной из основных задач программиста является манипулирование данными. Существует большое количество типов данных, как стандартных для выбранного языка программирования, так и созданных пользователем. Для эффективной работы с данными необходимо иметь инструмент преобразования типов, способный осуществлять приведение без потери информации. Именно этой теме посвящена данная работа. 
Для построения преобразования пользовательских типов был использован JSON- стандартный текстовый формат для хранения и передачи структурированных данных. Среди его преимуществ-простой синтаксис, универсальность и компактность. 
В данной работе представлен алгоритм распознавания и преобразования типов данных, в том числе созданных пользователем. 
В работе используется заголовочный файл библиотеки nlohmann::json.

 
## 1. Цели и задачи 

Целью данной работы является создание программной реализации алгоритма преобразования типов данных, в том числе типов, созданных пользователем. Для её достижения были поставлены следующие задачи: 
1) Ознакомиться с существующими методами преобразования типов 
2) Найти способы преобразования данных не допускающих потерь 
3) Создать граф допустимых преобразований  
4) Создать инструментарий позволяющий пользователю преобразовать вводимые данные к определённому типу, в том числе и созданному в процессе работы программы 
5) Провести несколько экспериментов на различных тестовых объектах 
6) Сделать программную реализацию 


## 2. Обзор 

### 2.1 Проверка допустимости преобразований типов 

При написании программы C++ важно убедиться, что она является  что каждое значение переменной, аргумента функции и возвращаемого функции сохраняет приемлемый тип данных, и что операции, включающие значения различных типов, "имеют смысл" и не вызывают потери данных. Для этого необходимо иметь методы проверки осуществимости безопасного преобразования одних типов данных в другие. Безопасными считаются преобразования, не ведущие к утере данных об объекте.  
Среди встроенных типов безопасной цепочкой преобразований является: 
bool->char->integer->float->double. 
 

### 2.2 Массивы JSON 

Массивы JSON представляют собой набор значений, принадлежащий одному типу данных. В данной работе к преобразованию допустимы массивы состоящие из встроенных типов. 
Встроенными типами считаются: 
bool 
char 
integer 
float 
double 
Тип “массив JSON” создаётся пользователем с помощью конструктора пользовательских типов. Декларирование типа выглядит следующим образом: ["имя-нового-типа", "Array", "тип-элемента"] 


### 2.3 Язык программирования 

Язык С++ является расширением языка С, позволяющий использовать такие инструменты как объектно-ориентированное программирование и шаблоны. Он  удобен и имеет широкий спектр применения в создании программного обеспечения. Код на С++ быстр и эффективен.  


## 3. Постановка задачи 

Дан объект введённый пользователем, а также список созданных им типов. Требуется построить граф преобразований и создать инструментарий проверки возможности и впоследствии осуществления преобразования объекта из одного типа в другой.
 

## 4. Ход работы 

### 4.1 Граф преобразований  

Пользователь вводит объект, который необходимо преобразовать, после чего предлагается создать пользовательские типы. 
Все созданные типы записываются в вектор деклараций names. 
Если пользовательский тип не является массивом встроенного типа, он также добавляется в names, однако он не может далее участвовать в преобразовании.  Массивы же добавляются в граф преобразований graph, также как и набор встроенных типов. 
Далее с помощью инструментов созданных в работе по определению типов JSON проводится проверка к каким типам принадлежит введённый объект. 
Граф представляет собой вектор объектов класса Graphver, каждый объект имеет характеристику type, обозначающую его тип, а также характеристику roads-вектор элементов графа, из которых возможно преобразование в данный объект. 
Пользователю предлагается задать новое преобразование одного элемента графа в другой. Для этого необходимо ввести названия обоих типов. Преобразования встроенных типов задано заранее. Если имена вводимых типов не принадлежат графу, выводится сообщение о некорректности ввода. В противном случае осуществляется проверка на допустимость преобразования: 
В проверяющую функцию передаются граф и имена типов 
Если типы элементов массивов возможно преобразовать напрямую, то есть два встроенных типа являются соседними вершинами в графе, то функция возвращает первый тип и он добавляется в список путей второго типа. 
В противном случае происходит обход в глубину элементов графа, имеющих путь от первой вершины. 
Результатом работы функции является тип, который можно привести ко второму типу единичным преобразованием. Если такого типа нет, выводится сообщение о невозможности преобразования без потерь. 
 

### 4.2 Преобразование объекта 

Пользователю предлагается ввести имя типа, в который нужно преобразовать объект. 
Если список найденных типов объекта пуст, выводится сообщение о невозможности преобразования. 
Если имя введённого типа не принадлежит графу, выводится сообщение о некорректности имени. 
В противном случае: 
Производится проверка существования пути в графе между двумя типами. 
Если путь есть, вызывается функция поиска пути, записывающая в вектор все промежуточные преобразования типа, после чего элементы вектора передаются в функцию преобразования соседних вершин графа. 
Итогом работы является объект, преобразованный в нужный тип, он передаётся в тело программы с помощью шаблонной функции, выводящей переменную того типа, который был введён пользователем. 
Полученный объект выводится на экран. 



## Заключение 

В данной работе были получены следующие результаты: 
1)Изучены методы преобразования данных. 
2)Построен алгоритм преобразования с помощью графа путей. 
3)Проведены эксперименты на нескольких тестовых объектов. 
4) Сделана программная реализация на языке С++. 
